当前工作目录: /data/workspace/traespace/wass_trae
🚀 开始基于WRENCH的真实WASS-RAG实验...
🔍 查找模型文件...
🔍 检查模型文件: models/improved_wass_drl.pth
🔍 绝对路径: /data/workspace/traespace/wass_trae/models/improved_wass_drl.pth
✅ 找到模型文件: models/improved_wass_drl.pth
📁 使用模型文件: models/improved_wass_drl.pth
🔍 正在加载模型文件...
🔍 模型加载成功，检查点键: ['q_network_state_dict', 'target_network_state_dict', 'optimizer_state_dict', 'training_step', 'epsilon', 'config', 'training_history', 'exploration_params', 'metadata']
✅ Model loaded successfully (strict).
🔍 DRL代理: <class 'src.drl_agent.DQNAgent'>
🔍 节点名称: ['node1', 'node2', 'node3']
🔍 预测器: <class 'NoneType'>
2025-09-15 10:17:43,430 - src.ai_schedulers - INFO - Initialized WASSDRLScheduler with 3 nodes.
✅ WASS-DRL调度器已强制启用
DEBUG: WASSRAGScheduler __init__ called!
2025-09-15 10:17:43,430 - src.ai_schedulers - INFO - Initialized WASSDRLScheduler with 3 nodes.
DEBUG: RAGFusionFix __init__ called!
DEBUG: Loading knowledge base from data/wrench_rag_knowledge_base.pkl
⚠️  WASS-RAG从data/wrench_rag_knowledge_base.pkl加载失败: Expecting value: line 1 column 1 (char 0)
DEBUG: WASSRAGScheduler __init__ called!
2025-09-15 10:17:43,431 - src.ai_schedulers - INFO - Initialized WASSDRLScheduler with 3 nodes.
DEBUG: RAGFusionFix __init__ called!
DEBUG: Loading knowledge base from data/wrench_rag_knowledge_base.json
DEBUG: Loaded 5000 cases from knowledge base
2025-09-15 10:17:43,703 - src.ai_schedulers - INFO - Initialized WASSRAGScheduler with R_RAG dynamic reward mechanism and fix components.
✅ WASS-RAG调度器已启用 (知识库: data/wrench_rag_knowledge_base.json)
🔧 已启用调度器: ['FIFO', 'HEFT', 'WASS-Heuristic', 'WASS-DRL', 'WASS-RAG']
🚀 WRENCH实验运行器初始化完成
🔬 开始完整WRENCH实验...
调度器: ['FIFO', 'HEFT', 'WASS-Heuristic', 'WASS-DRL', 'WASS-RAG']
工作流规模: [5, 10, 15, 20]
重复次数: 3
总实验数: 60 = 5调度器 × 4任务规模 × 3次重复

📝 预生成工作流（确保公平比较）...
   生成工作流: 5个任务, 重复1
   ✅ 工作流生成成功
   生成工作流: 5个任务, 重复2
   ✅ 工作流生成成功
   生成工作流: 5个任务, 重复3
   ✅ 工作流生成成功
   生成工作流: 10个任务, 重复1
   ✅ 工作流生成成功
   生成工作流: 10个任务, 重复2
   ✅ 工作流生成成功
   生成工作流: 10个任务, 重复3
   ✅ 工作流生成成功
   生成工作流: 15个任务, 重复1
   ✅ 工作流生成成功
   生成工作流: 15个任务, 重复2
   ✅ 工作流生成成功
   生成工作流: 15个任务, 重复3
   ✅ 工作流生成成功
   生成工作流: 20个任务, 重复1
   ✅ 工作流生成成功
   生成工作流: 20个任务, 重复2
   ✅ 工作流生成成功
   生成工作流: 20个任务, 重复3
   ✅ 工作流生成成功

🚀 开始运行实验...

进度: 1/60
   工作流: 5个任务, 重复1
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 5)
   ✅ 完成: 10.19s

进度: 2/60
   工作流: 5个任务, 重复1
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 5)
   ✅ 完成: 8.98s

进度: 3/60
   工作流: 5个任务, 重复1
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 5)
   ✅ 完成: 8.98s

进度: 4/60
   工作流: 5个任务, 重复1
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 5)
   ✅ 完成: infs

进度: 5/60
   工作流: 5个任务, 重复1
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 5)
   ✅ 完成: infs

进度: 6/60
   工作流: 5个任务, 重复2
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 5)
   ✅ 完成: 14.47s

进度: 7/60
   工作流: 5个任务, 重复2
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 5)
   ✅ 完成: 11.54s

进度: 8/60
   工作流: 5个任务, 重复2
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 5)
   ✅ 完成: 11.54s

进度: 9/60
   工作流: 5个任务, 重复2
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 5)
   ✅ 完成: infs

进度: 10/60
   工作流: 5个任务, 重复2
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 5)
   ✅ 完成: infs

进度: 11/60
   工作流: 5个任务, 重复3
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 5)
   ✅ 完成: 10.86s

进度: 12/60
   工作流: 5个任务, 重复3
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 5)
   ✅ 完成: 8.13s

进度: 13/60
   工作流: 5个任务, 重复3
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 5)
   ✅ 完成: 8.13s

进度: 14/60
   工作流: 5个任务, 重复3
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 5)
   ✅ 完成: infs

进度: 15/60
   工作流: 5个任务, 重复3
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 5)
   ✅ 完成: infs

进度: 16/60
   工作流: 10个任务, 重复1
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 10)
   ✅ 完成: 12.06s

进度: 17/60
   工作流: 10个任务, 重复1
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 10)
   ✅ 完成: 9.39s

进度: 18/60
   工作流: 10个任务, 重复1
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 10)
   ✅ 完成: 9.39s

进度: 19/60
   工作流: 10个任务, 重复1
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 10)
   ✅ 完成: infs

进度: 20/60
   工作流: 10个任务, 重复1
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 10)
   ✅ 完成: infs

进度: 21/60
   工作流: 10个任务, 重复2
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 10)
   ✅ 完成: 13.81s

进度: 22/60
   工作流: 10个任务, 重复2
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 10)
   ✅ 完成: 9.35s

进度: 23/60
   工作流: 10个任务, 重复2
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 10)
   ✅ 完成: 9.35s

进度: 24/60
   工作流: 10个任务, 重复2
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 10)
   ✅ 完成: infs

进度: 25/60
   工作流: 10个任务, 重复2
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 10)
   ✅ 完成: infs

进度: 26/60
   工作流: 10个任务, 重复3
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 10)
   ✅ 完成: 15.91s

进度: 27/60
   工作流: 10个任务, 重复3
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 10)
   ✅ 完成: 12.78s

进度: 28/60
   工作流: 10个任务, 重复3
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 10)
   ✅ 完成: 12.78s

进度: 29/60
   工作流: 10个任务, 重复3
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 10)
   ✅ 完成: infs

进度: 30/60
   工作流: 10个任务, 重复3
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 10)
   ✅ 完成: infs

进度: 31/60
   工作流: 15个任务, 重复1
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 15)
   ✅ 完成: 15.65s

进度: 32/60
   工作流: 15个任务, 重复1
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 15)
   ✅ 完成: 14.66s

进度: 33/60
   工作流: 15个任务, 重复1
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 15)
   ✅ 完成: 14.66s

进度: 34/60
   工作流: 15个任务, 重复1
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 15)
   ✅ 完成: infs

进度: 35/60
   工作流: 15个任务, 重复1
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 15)
   ✅ 完成: infs

进度: 36/60
   工作流: 15个任务, 重复2
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 15)
   ✅ 完成: 22.22s

进度: 37/60
   工作流: 15个任务, 重复2
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 15)
   ✅ 完成: 17.93s

进度: 38/60
   工作流: 15个任务, 重复2
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 15)
   ✅ 完成: 17.93s

进度: 39/60
   工作流: 15个任务, 重复2
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 15)
   ✅ 完成: infs

进度: 40/60
   工作流: 15个任务, 重复2
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 15)
   ✅ 完成: infs

进度: 41/60
   工作流: 15个任务, 重复3
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 15)
   ✅ 完成: 13.80s

进度: 42/60
   工作流: 15个任务, 重复3
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 15)
   ✅ 完成: 12.96s

进度: 43/60
   工作流: 15个任务, 重复3
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 15)
   ✅ 完成: 12.96s

进度: 44/60
   工作流: 15个任务, 重复3
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 15)
   ✅ 完成: infs

进度: 45/60
   工作流: 15个任务, 重复3
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 15)
   ✅ 完成: infs

进度: 46/60
   工作流: 20个任务, 重复1
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 20)
   ✅ 完成: 20.05s

进度: 47/60
   工作流: 20个任务, 重复1
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 20)
   ✅ 完成: 19.39s

进度: 48/60
   工作流: 20个任务, 重复1
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 20)
   ✅ 完成: 19.39s

进度: 49/60
   工作流: 20个任务, 重复1
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 20)
   ✅ 完成: infs

进度: 50/60
   工作流: 20个任务, 重复1
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 20)
   ✅ 完成: infs

进度: 51/60
   工作流: 20个任务, 重复2
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 20)
   ✅ 完成: 23.20s

进度: 52/60
   工作流: 20个任务, 重复2
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 20)
   ✅ 完成: 20.48s

进度: 53/60
   工作流: 20个任务, 重复2
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 20)
   ✅ 完成: 20.48s

进度: 54/60
   工作流: 20个任务, 重复2
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 20)
   ✅ 完成: infs

进度: 55/60
   工作流: 20个任务, 重复2
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 20)
   ✅ 完成: infs

进度: 56/60
   工作流: 20个任务, 重复3
   调度器: FIFO
    🔬 运行实验: FIFO (工作流大小: 20)
   ✅ 完成: 24.93s

进度: 57/60
   工作流: 20个任务, 重复3
   调度器: HEFT
    🔬 运行实验: HEFT (工作流大小: 20)
   ✅ 完成: 20.79s

进度: 58/60
   工作流: 20个任务, 重复3
   调度器: WASS-Heuristic
    🔬 运行实验: WASS-Heuristic (工作流大小: 20)
   ✅ 完成: 20.79s

进度: 59/60
   工作流: 20个任务, 重复3
   调度器: WASS-DRL
    🔬 运行实验: WASS-DRL (工作流大小: 20)
   ✅ 完成: infs

进度: 60/60
   工作流: 20个任务, 重复3
   调度器: WASS-RAG
    🔬 运行实验: WASS-RAG (工作流大小: 20)
   ✅ 完成: infs
📊 实验结果已保存到 results/wrench_experiments

📈 实验结果分析:
============================================================
调度器             平均Makespan      标准差        最佳         实验次数    
------------------------------------------------------------
FIFO            16.43           4.76       10.19      12      
HEFT            13.87           4.51       8.13       12      
WASS-Heuristic  13.87           4.51       8.13       12      
WASS-DRL        inf             nan        inf        12      
WASS-RAG        inf             nan        inf        12      

🏆 最佳调度器: HEFT (平均Makespan: 13.87s)

🎉 所有实验完成！共运行 60 次实验

🎉 所有实验完成!
