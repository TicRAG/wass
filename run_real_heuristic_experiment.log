[0;34m[INFO][0m 启动 WASS-RAG 全流程训练与实验...
[0;34m[INFO][0m 预计总用时: 30-60分钟

[0;34m[INFO][0m --- [阶段一] 开始：知识库播种 ---
[0;34m[INFO][0m 步骤 1/2: 从历史运行中提取启发式算法案例...
正在加载实验结果...
加载了 60 个实验
正在提取HEFT和WASS-Heuristic案例...
提取了 450 个原始案例
HEFT案例: 225
WASS-Heuristic案例: 225

真实案例知识库构建完成!
总案例数: 2000
HEFT案例: 1100
WASS-Heuristic案例: 900
平均makespan: 16.48
数据已保存到: data/heuristic_only_real_cases.json
[0;32m[SUCCESS][0m 案例提取完成，数据保存在: data/heuristic_only_real_cases.json
[0;34m[INFO][0m 步骤 2/2: 将案例更新并构建到主知识库...
=== 使用真实HEFT和WASS-Heuristic案例更新RAG知识库 ===
正在加载真实HEFT和WASS-Heuristic案例...
已加载 2000 个真实案例

真实案例知识库创建完成!
总案例数: 2000
HEFT案例: 1100
WASS-Heuristic案例: 900
数据已保存到: data/real_heuristic_kb.json
已更新RAG配置，使用新的知识库: data/real_heuristic_kb.json
训练数据集创建完成: 2000 个样本
数据已保存到: data/heuristic_training_dataset.json

=== 更新完成 ===
下一步可以运行：
1. python scripts/train_rag_wrench.py - 重新训练RAG模型
2. python run_complete_experiment.sh - 运行完整实验
[0;32m[SUCCESS][0m 主知识库构建完成: data/real_heuristic_kb.json
[0;32m[SUCCESS][0m --- [阶段一] 完成 ---

[0;34m[INFO][0m --- [阶段二] 开始：训练性能预测器 (导师) ---
[0;34m[INFO][0m 使用 data/real_heuristic_kb.json 中的数据训练性能预测器...
[0;34m[INFO][0m scripts/train_predictor_from_kb.py --kb-path data/real_heuristic_kb.json configs/predictor.yaml
数据加载完成。特征维度(任务+动作): 9, 样本数: 2000
开始训练导师模型...
Epoch [10/50], Loss: 68.7808
Epoch [20/50], Loss: 34.3108
Epoch [30/50], Loss: 40.4188
Epoch [40/50], Loss: 27.0899
Epoch [50/50], Loss: 40.4206
训练完成。模型已保存到: models/performance_predictor.pth
[0;32m[SUCCESS][0m 性能预测器训练完成，模型已根据 configs/predictor.yaml 中的配置保存
[0;32m[SUCCESS][0m --- [阶段二] 完成 ---

[0;34m[INFO][0m --- [阶段三] 开始：训练DRL智能体 (学习者) ---
[0;34m[INFO][0m 确保DRL训练配置与实验环境一致...
[0;34m[INFO][0m 配置文件已临时更新，开始使用 improved_drl_trainer.py 进行训练...
[0;34m[INFO][0m scripts/improved_drl_trainer.py --config configs/drl.yaml
✅ 导师输入维度动态识别: 9
🧠 导师 (性能预测器) 加载成功: models/performance_predictor.pth
📚 用于训练的真实知识库加载成功: data/real_heuristic_kb.json (2000 cases)
🚀 开始从知识库进行离线DRL训练，共 20 轮...
轮次 2/20, 平均损失: 0.0000
轮次 4/20, 平均损失: 0.0000
轮次 6/20, 平均损失: 0.0000
轮次 8/20, 平均损失: 0.0000
轮次 10/20, 平均损失: 0.0000
轮次 12/20, 平均损失: 0.0000
轮次 14/20, 平均损失: 0.0000
轮次 16/20, 平均损失: 0.0000
轮次 18/20, 平均损失: 0.0000
轮次 20/20, 平均损失: 0.0000
📁 学习者模型已保存: models/improved_wass_drl.pth
🎉 离线训练完成!
[0;32m[SUCCESS][0m DRL智能体训练完成，模型保存在: models/improved_wass_drl.pth
[0;34m[INFO][0m 原始DRL配置文件已恢复
[0;32m[SUCCESS][0m --- [阶段三] 完成 ---

[0;34m[INFO][0m --- [最终评估] 开始：运行对比实验 ---
🚀 开始基于WRENCH的真实WASS-RAG实验...
✅ 找到模型文件: /data/workspace/traespace/wass_trae/models/improved_wass_drl.pth
📁 使用模型文件: /data/workspace/traespace/wass_trae/models/improved_wass_drl.pth
🔍 正在加载模型文件...
✅ 模型结构动态识别: state_dim=5, action_dim=4
✅ DRL Agent模型加载并验证成功！
🔧 已启用调度器: ['FIFO', 'HEFT', 'WASS-Heuristic', 'WASS-DRL', 'WASS-RAG']
🔬 开始完整WRENCH实验...
总实验数: 60
[警告] 在 workflows 中未找到大小为 5 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 10 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 15 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 20 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 5 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 10 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 15 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 20 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 5 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 10 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 15 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 20 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 5 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 10 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 15 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 20 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 5 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 10 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 15 的工作流文件，跳过...
[警告] 在 workflows 中未找到大小为 20 的工作流文件，跳过...

📈 实验结果分析:
没有可供分析的实验结果。
[0;32m[SUCCESS][0m 对比实验运行完成
[0;34m[INFO][0m 生成最终结果摘要...
实验结果文件不存在
